openapi: 3.0.0
info:
  title: API仕様書
  version: '1.0'
  description: ''
servers:
  - url: 'http://localhost:4000/api'
paths:
  /branches:
    get:
      summary: List branch
      operationId: get-branches
      parameters:
        - schema:
            type: string
          in: query
          name: branchId
          description: 支社id
      description: ''
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Site'
      tags:
        - 支社
    post:
      summary: Create a site
      tags:
        - 現場
      operationId: post-branch
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Site'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SiteRequest'
            examples:
              example-1:
                value:
                  name: string
              example-2:
                value:
                  name: string
                  branchId: 0
                  confirmationNumber: string
                  officeName: string
                  constructionMethodId: 0
                  status: string
                  heightReferenceCode: string
                  cementType: 0
        description: ''
  '/sites/{siteId}':
    parameters:
      - schema:
          type: string
        name: siteId
        in: path
        required: true
    put:
      summary: Update a site
      operationId: put-sites-siteId
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Site'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SiteRequest'
      tags:
        - 現場
      description: ''
  '/sites/{siteId}/complete':
    parameters:
      - schema:
          type: string
        name: siteId
        in: path
        required: true
    patch:
      summary: ''
      operationId: patch-sites-siteId-complete
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                  status:
                    type: string
      tags:
        - 現場
  /parks:
    get:
      summary: List park
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Pile'
      operationId: get-piles
      parameters:
        - schema:
            type: string
          in: query
          name: limit
        - schema:
            type: string
          in: query
          name: offset
        - schema:
            type: string
          in: query
          name: siteId
        - schema:
            type: string
          in: query
          name: number
      tags:
        - 公園
    post:
      summary: Create a pile
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Pile'
      operationId: post-piles
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PileRequest'
      tags:
        - 公園
    parameters: []
  '/piles/{pileId}':
    parameters:
      - schema:
          type: string
        name: pileId
        in: path
        required: true
    put:
      summary: Update a pile
      tags:
        - 杭
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Pile'
      operationId: put-piles-pileId
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PileRequest'
    get:
      summary: Get a pile
      operationId: get-piles-pileId
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Pile'
      tags:
        - 杭
      description: ''
  '/piles/{pileId}/complete':
    parameters:
      - schema:
          type: number
        name: pileId
        in: path
        required: true
    patch:
      summary: Update Part Of Pile
      operationId: patch-piles-complete-pileId
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  pileId:
                    type: number
                  completedDate:
                    type: string
                  orderOfCompletion:
                    type: number
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: boolean
      tags:
        - 杭
  /n-values:
    post:
      summary: Create a n-value
      tags:
        - N値
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NValue'
      operationId: post-n-values
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NValueRequest'
    get:
      summary: List n-values
      operationId: get-n-values
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/NValue'
      tags:
        - N値
      parameters:
        - schema:
            type: string
          in: query
          name: limit
        - schema:
            type: string
          in: query
          name: offset
        - schema:
            type: string
          in: query
          name: siteId
        - schema:
            type: string
          in: query
          name: bowlingNumber
  /pile-measurement-data:
    get:
      summary: List measurement data
      tags:
        - 計測データ
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PileMeasurementDataEarthguide'
      operationId: get-pile-measurement-data
      parameters:
        - schema:
            type: string
          in: query
          name: limit
        - schema:
            type: string
          in: query
          name: offset
        - schema:
            type: string
          in: query
          name: pileId
        - schema:
            type: string
          in: query
          name: fromMeasuredDatetime
          description: 指定時刻より後のデータを取得（ポーリング用）
    post:
      summary: Create measurement data
      tags:
        - 計測データ
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PileMeasurementDataEarthguide'
      operationId: post-pile-measurement-data
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PileMeasurementDataEarthguideRequest'
  /pile-devices:
    get:
      summary: List Pile Devices
      tags:
        - 杭通信装置
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PileDevice'
      operationId: get-pile-devices
  '/pile-devices/{pileDeviceId}':
    parameters:
      - schema:
          type: string
        name: pileDeviceId
        in: path
        required: true
    get:
      summary: Get a pile device
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PileDevice'
      operationId: get-pile-devices-pileDeviceId
      tags:
        - 杭通信装置
    put:
      summary: Update Pile Device
      operationId: put-pile-devices-pileDeviceId
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PileDevice'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PileDeviceRequest'
      tags:
        - 杭通信装置
      description: ''
  /construction-methods:
    get:
      summary: List construction methods
      tags:
        - 工法
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ConstructionMethod'
      operationId: get-construction-methods
      parameters:
        - schema:
            type: string
          in: query
          name: limit
        - schema:
            type: string
          in: query
          name: offset
  /management-sub-items:
    get:
      summary: List management sub items
      tags:
        - 管理項目（小）
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ManagementSubItem'
      operationId: get-management-item-smalls
      parameters:
        - schema:
            type: string
          in: query
          name: limit
        - schema:
            type: string
          in: query
          name: offset
        - schema:
            type: string
          in: query
          name: managementItemId
  /pictures:
    get:
      summary: List pictures
      tags:
        - 写真
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Picture'
      operationId: get-pictures
      parameters:
        - schema:
            type: string
          in: query
          name: limit
        - schema:
            type: string
          in: query
          name: offset
        - schema:
            type: string
          in: query
          name: siteId
    post:
      summary: Create a picture
      operationId: post-pictures
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Picture'
      tags:
        - 写真
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/PictureRequest'
  '/pictures/{pictureId}':
    parameters:
      - schema:
          type: string
        name: pictureId
        in: path
        required: true
    put:
      summary: Update a picture
      operationId: put-pictures-pictureId
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Picture'
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/PictureRequest'
      tags:
        - 写真
    delete:
      summary: Delete a picture
      operationId: delete-pictures-pictureId
      responses:
        '204':
          description: No Content
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Picture'
      tags:
        - 写真
  /picture-reports/download:
    get:
      summary: 写真台帳のダウンロード
      tags:
        - 写真
      responses:
        '200':
          description: OK
          content:
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: string
      operationId: get-picture-reports-download
      parameters:
        - schema:
            type: number
          in: query
          name: pictureId
          description: '複数のpictureIdを指定する場合は「,」区切りで指定する'
        - schema:
            type: number
          in: query
          name: siteId
          required: true
  /judgement-results:
    get:
      summary: List judgement result
      tags:
        - 判定結果
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/JudgementResult'
            application/xml:
              schema:
                type: object
                properties: {}
            multipart/form-data:
              schema:
                type: object
                properties: {}
      operationId: get-judgement-result
      description: 杭に紐づく全判定結果を取得する
      parameters:
        - schema:
            type: string
          in: query
          name: pileId
          required: true
    post:
      summary: Create or update judgement result
      operationId: post-judgment-result
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/JudgementResult'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JudgmentResultRequest'
      description: 判定結果を登録or更新する
      tags:
        - 判定結果
  /check-sheets/download:
    get:
      summary: Download CheckSheet
      tags:
        - チェックシート
      responses:
        '200':
          description: OK
          content:
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: string
      operationId: get-check-sheet
      parameters:
        - schema:
            type: string
          in: query
          name: pileId
          required: true
      description: |-
        ファイルダウンロードを確認する場合、Swagger以外のAPIクライアントや下記のcurlコマンドにより確認する。
        curl -X GET 'http://localhost:3000/api/check-sheets/download?pileId=杭ID' -H 'accept: */*' -H 'Authorization: Bearer トークン文字列' --output 杭ID-check-sheets.xlsx
  /check-status:
    get:
      summary: List CheckStatus
      tags:
        - 確認状態
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CheckStatus'
      operationId: get-check-status
      parameters:
        - schema:
            type: string
          in: query
          name: pileId
          required: true
      description: ''
    post:
      summary: Add Check Status
      operationId: post-check-status
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  pileId:
                    type: number
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/CheckStatusPostResponse'
      tags:
        - 確認状態
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CheckStatusRequest'
  /pile-designs/file:
    post:
      summary: Upload PileDesign CSV
      operationId: post-pile-design-upload
      responses:
        '200':
          description: OK
      description: ''
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                siteId:
                  type: number
      tags:
        - 杭設計値
  /judgement-methods/sites-piles:
    get:
      summary: List judgement methods per site or pile
      tags:
        - 判定方法
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  項目番号:
                    type: array
                    items:
                      $ref: '#/components/schemas/JudgementMethod'
      operationId: get-judgement-methods-sites
      parameters:
        - schema:
            type: string
          in: query
          name: pileId
      description: |-
        杭ごとの判定方法の設定値を返却
        ※未設定の場合は現場の設定値を返却
    post:
      summary: Add relation site and pile to judgement method
      operationId: post-judgement-methods-sites
      responses:
        '200':
          description: OK
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JudgementMethodPilePostRequest'
      description: 杭および現場ごとの判定方法を設定する
      tags:
        - 判定方法
  /pile-designs:
    get:
      summary: List PileDesign
      tags:
        - 杭設計値
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PileDesign'
      operationId: get-pile-design
      parameters:
        - schema:
            type: string
          in: query
          name: pileId
          required: true
  /acceptance-inspections:
    get:
      summary: List AcceptanceInspections
      tags:
        - 受入検査
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PileComponentDesignForAcceptanceInspection'
      operationId: get-acceptance-Inspections
      parameters:
        - schema:
            type: number
          in: query
          name: pileId
          required: true
    post:
      summary: Add or Update AcceptanceInspections
      operationId: post-acceptance-inspections
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AcceptanceInspections'
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/AcceptanceInspectionsPostRequest'
      tags:
        - 受入検査
  /check-sheets/complete:
    post:
      summary: Update CheckSheet status when user complete entering checksheet.
      operationId: post-check-sheets-complete
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  pileId:
                    type: number
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                pileId:
                  type: number
                status:
                  type: boolean
              required:
                - pileId
        description: ''
      tags:
        - チェックシート
  '/pile-designs/{pileDesignId}':
    parameters:
      - schema:
          type: string
        name: pileDesignId
        in: path
        required: true
    patch:
      summary: Update PileDesign
      operationId: patch-pile-design-pileDesignId
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PileDesign'
      description: ''
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PileComponentDesignPatchRequest'
      tags:
        - 杭設計値
  /management-values/sites-piles:
    get:
      summary: List management values per site or pile
      tags:
        - 管理値
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ManagementValue'
      operationId: get-management-values-sites-piles
      parameters:
        - schema:
            type: string
          in: query
          name: pileId
      description: |-
        杭ごとの管理値を返却
        ※未設定の場合は現場の管理値を返却
    post:
      summary: Create or update management value of site and pile
      operationId: post-management-values-sites-piles
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ManagementValue'
      description: 杭および現場ごとの管理値を設定する
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ManagementValueRequest'
      tags:
        - 管理値
  /approvals:
    get:
      summary: List approvals
      tags:
        - 承認
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Approval'
      operationId: get-approvals
      parameters:
        - schema:
            type: string
          in: query
          required: true
          name: pileId
    post:
      summary: Create a approval
      operationId: post-approvals
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Approval'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ApprovalRequest'
      tags:
        - 承認
      description: DBへ登録するcognitoのuserName、氏名はバックエンド側でトークンから取得する。
  /current-sheets/download:
    get:
      summary: Download CurrentSheet
      tags:
        - 電流帳票
      responses:
        '200':
          description: OK
          content:
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: string
      operationId: get-current-sheets-download
      parameters:
        - schema:
            type: number
          in: query
          name: pileId
          required: true
      description: |-
        ファイルダウンロードを確認する場合、Swagger以外のAPIクライアントや下記のcurlコマンドにより確認する。
        curl -X GET 'http://localhost:3000/api/current-sheets/download?pileId=杭ID' -H 'accept: */*' -H 'Authorization: Bearer トークン文字列' --output 杭ID-current-sheets.xlsx
  /check-sheets/batch-download:
    get:
      summary: Batch Download CheckSheet & CurrentSHee
      tags:
        - チェックシート
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties: {}
            application/zip:
              schema:
                type: string
      operationId: get-check-sheets-batch-download
      parameters:
        - schema:
            type: string
          in: query
          name: pileId
          required: true
          description: '複数のpileIdを指定する場合は「,」区切りで指定する'
  /users:
    get:
      summary: List users
      tags:
        - ユーザ
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
      operationId: get-users
      parameters:
        - schema:
            type: string
          in: query
          name: branchId
          description: 支社id
        - schema:
            type: string
          in: query
          name: siteId
          description: 現場id
        - schema:
            type: string
          in: query
          name: isInternal
          description: trueの場合は社内ユーザのみレスポンスする
      description: ''
    post:
      summary: Create a user
      operationId: post-users
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
      tags:
        - ユーザ
      description: ''
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                userName:
                  type: string
                password:
                  type: string
                email:
                  type: string
                familyName:
                  type: string
                givenName:
                  type: string
                roleTypeId:
                  type: number
                branchId:
                  type: number
        description: ''
  '/users/{uuid}/change-password':
    post:
      summary: Change user's password
      operationId: post-users-change-password
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
      tags:
        - ユーザ
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                password:
                  type: string
    parameters:
      - schema:
          type: string
        name: uuid
        in: path
        required: true
  '/users/{uuid}':
    parameters:
      - schema:
          type: string
        name: uuid
        in: path
        required: true
    delete:
      summary: Delete User
      operationId: delete-users-uuid
      responses:
        '204':
          description: No Content
      tags:
        - ユーザ
    patch:
      summary: Update a user
      operationId: patch-users-uuid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                branchId:
                  type: number
                siteIdList:
                  type: array
                  items:
                    type: number
      tags:
        - ユーザ
    get:
      summary: 支社一覧取得
      tags:
        - 支社
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Branch'
      operationId: get-branches
  /management-items:
    get:
      summary: 管理項目一覧取得
      tags:
        - 管理項目（大）
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ManagementItem'
      operationId: get-management-items
      description: ''
      parameters:
        - schema:
            type: number
          in: query
          name: constructionMethodId
          required: true
  '/piles/{pileId}/management-items':
    get:
      summary: 杭ごとの管理項目取得
      tags:
        - 管理項目（大）
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PileManagementItem'
      operationId: get-pile-management-items
    parameters:
      - schema:
          type: string
        name: pileId
        in: path
        required: true
  /measurement-values:
    get:
      summary: 実績値の取得
      tags:
        - 実績値
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MeasurementValue'
      operationId: get-measurement-values
      parameters:
        - schema:
            type: number
          in: query
          name: pileId
    post:
      summary: 実績値の登録
      operationId: post-measurement-values
      responses:
        '200':
          description: OK
      tags:
        - 実績値
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MeasurementValueRequest'
  /site-lists/csv:
    get:
      summary: 計画書システムから連携された現場情報の一覧
      operationId: get-site-lists-csv
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    confirmationNumber:
                      type: string
                    name:
                      type: string
                    branchId:
                      type: string
                    fileName:
                      type: string
      tags:
        - 計画書システム連携
      parameters:
        - schema:
            type: number
          in: query
          name: branchId
    parameters: []
  /sites/csv:
    get:
      summary: 計画書システムから連携されたCSVから現場データを取得
      tags:
        - 計画書システム連携
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Site'
      operationId: get-site-csv
      parameters:
        - schema:
            type: string
          in: query
          name: fileName
      description: ''
    parameters: []
  /piles/csv:
    get:
      summary: 杭符号リストの一覧取得
      tags:
        - 計画書システム連携
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  siteId:
                    type: number
                  fileName:
                    type: string
                  csvPiles:
                    type: array
                    items:
                      type: object
                      properties:
                        pileCode:
                          type: string
                        fullLength:
                          type: number
      operationId: get-sites-piles-csv
      parameters:
        - schema:
            type: number
          in: query
          name: siteId
    post:
      summary: 選択した杭符号のデータを杭に登録
      operationId: post-sites-piles-csv
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Pile'
      tags:
        - 計画書システム連携
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                siteId:
                  type: number
                fileName:
                  type: string
                pileMappings:
                  type: array
                  items:
                    type: object
                    properties:
                      pileId:
                        type: number
                        description: PileVimSys上のpileId
                      pileCode:
                        type: string
                        description: '計画書CSVから読み込んだ杭符号（P1,P2等）'
    parameters: []
  /support-layers:
    get:
      summary: 支持層確認のモーダル用API
      tags:
        - 支持層確認
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  pile:
                    type: object
                    properties:
                      supportLayerExpressionLimitDepth:
                        type: number
                      supportLayerExpressionDepth:
                        type: number
                      supportLayerBasisDescription:
                        type: string
                      supportLayerBasisType:
                        type: string
                  measurementValues:
                    type: array
                    items:
                      type: object
                      properties:
                        managementSubItemId:
                          type: number
                        itemOrder:
                          type: number
                        jointOrder:
                          type: number
                        resultValue:
                          type: string
                  judgementMethodIds:
                    type: array
                    items:
                      type: number
      operationId: get-support-layers
      parameters:
        - schema:
            type: number
          in: query
          name: pileId
          required: true
components:
  schemas:
    Site:
      title: Site
      type: object
      description: ''
      properties:
        id:
          type: number
        confirmationNumber:
          type: string
        createdAt:
          type: string
        updatedAt:
          type: string
      x-examples:
        example-1:
          id: 0
          confirmationNumber: string
          createdAt: string
          updatedAt: string
    SiteRequest:
      title: SiteRequest
      type: object
      properties:
        name:
          type: string
        branchId:
          type: number
        confirmationNumber:
          type: string
        officeName:
          type: string
        constructionMethodId:
          type: number
        status:
          type: string
        heightReferenceCode:
          type: string
        cementType:
          type: number
    Pile:
      title: park
      type: object
      properties:
        id:
          type: number
        name:
          type: string
        address:
          type: string
        description:
          type: string
        prefectureId:
          type: number
        areaId:
          type: number
        countryId:
          type: number
        parkTypeId:
          type: number
        parkUrl:
          type: string
        openingTime:
          type: string
        price:
          type: number
        categoryId:
          type: number
        createdAt:
          type: string
        updatedAt:
          type: string
    PileRequest:
      title: ParkRequest
      type: object
      x-examples:
        example-1:
          id: 0
          name: string
          address: string
          description: string
          prefectureId: 0
          areaId: 0
          countryId: 0
          parkTypeId: 0
          parkUrl: string
          openingTime: string
          price: 0
          categoryId: 0
          createdAt: string
          updatedAt: string
      properties:
        name:
          type: string
        address:
          type: string
        description:
          type: string
        prefectureId:
          type: number
        areaId:
          type: number
        countryId:
          type: number
        parkUrl:
          type: string
        openingTime:
          type: string
        price:
          type: number
        categoryId:
          type: number
        parkTypeId:
          type: number
    NValue:
      title: NValue
      type: object
      description: ''
      properties:
        id:
          type: number
        siteId:
          type: number
        bowlingNumber:
          type: string
        createdAt:
          type: string
        updatedAt:
          type: string
        data:
          items:
            type: object
            properties:
              nValue:
                type: number
              depth:
                type: number
          type: array
    NValueRequest:
      title: NValueRequest
      type: object
      properties:
        siteId:
          type: number
        bowlingNumber:
          type: string
        data:
          items:
            type: object
            properties:
              depth:
                type: number
              nValue:
                type: number
          type: array
    PileMeasurementDataEarthguide:
      title: PileMeasurementDataEarthguide
      type: object
      properties:
        id:
          type: number
        pile:
          $ref: '#/components/schemas/Pile'
        pileDevice:
          $ref: '#/components/schemas/PileDevice'
        number:
          type: string
        measuredDatetime:
          type: string
        depth:
          type: number
        speed:
          type: number
        current:
          type: number
        instantFlow:
          type: number
        integralCurrent:
          type: number
        totalDrillingWater:
          type: number
        totalRooting:
          type: number
        totalPileFilling:
          type: number
        processNumber:
          type: string
        rotationSpeed:
          type: number
        reversal:
          type: boolean
        injectionPressure:
          type: number
        pileTipDepth:
          type: number
        expandedDiameter:
          type: number
        expandedOpeningPressure:
          type: number
        expandedClosurePressure:
          type: number
        expandedInstantFlow:
          type: number
        expandedOilIntegralFlow:
          type: number
        createdAt:
          type: string
        updatedAt:
          type: string
    PileMeasurementDataEarthguideRequest:
      title: PileMeasurementDataEarthguideRequest
      type: object
      properties:
        pileId:
          type: number
        pileDeviceId:
          type: number
        number:
          type: string
        measuredDatetime:
          type: string
          format: date-time
        depth:
          type: number
        speed:
          type: number
        current:
          type: number
        instantFlow:
          type: number
        integralCurrent:
          type: number
        totalDrillingWater:
          type: number
        totalRooting:
          type: number
        totalPileFilling:
          type: number
        processNumber:
          type: string
        rotationSpeed:
          type: number
        reversal:
          type: boolean
        injectionPressure:
          type: number
        pileTipDepth:
          type: number
        expandedDiameter:
          type: number
        expandedOpeningPressure:
          type: number
        expandedClosurePressure:
          type: number
        expandedInstantFlow:
          type: number
        expandedOilIntegralFlow:
          type: number
    PileDeviceRequest:
      title: PileDevice
      type: object
      properties:
        siteId:
          type: number
        name:
          type: string
        ipAddress:
          type: string
    PileDevice:
      title: PileDevice
      type: object
      properties:
        id:
          type: number
        site:
          $ref: '#/components/schemas/Site'
        name:
          type: string
        ipAddress:
          type: string
        createdAt:
          type: string
        updatedAt:
          type: string
    PileCompletePatchRequest:
      title: PileCompletePatchRequest
      type: object
      properties:
        siteId:
          type: number
        status:
          type: boolean
      required:
        - siteId
        - status
    ConstructionMethod:
      title: ConstructionMethod
      type: object
      properties:
        id:
          type: number
        name:
          type: string
        createdAt:
          type: string
        updatedAt:
          type: string
    ManagementItem:
      title: ManagementItem
      type: object
      properties:
        id:
          type: number
        constructionMethod:
          $ref: '#/components/schemas/ConstructionMethod'
        name:
          type: string
        takesPicture:
          type: boolean
        displaysPicture:
          type: boolean
        createdAt:
          type: string
        updatedAt:
          type: string
    ManagementSubItem:
      title: ManagementSubItem
      type: object
      properties:
        id:
          type: number
        managementItem:
          $ref: '#/components/schemas/ManagementItem'
        name:
          type: string
        jointType:
          type: number
        numOfMeasurementValue:
          type: number
        takesPicture:
          type: boolean
        createdAt:
          type: string
        updatedAt:
          type: string
    PictureRequest:
      title: PictureRequest
      type: object
      properties:
        siteId:
          type: number
        pileId:
          type: number
        managementItemId:
          type: number
        jointOrder:
          type: number
        pileDesignId:
          type: number
        pileComponentDesignId:
          type: number
        fileName:
          type: string
        description:
          type: string
        authorityType:
          type: number
        isStart:
          type: boolean
          description: パラメータ未指定の場合はfalseで登録する
      required:
        - siteId
    Picture:
      title: Picture
      type: object
      properties:
        id:
          type: number
        site:
          $ref: '#/components/schemas/Site'
        pile:
          $ref: '#/components/schemas/Pile'
        managementItem:
          $ref: '#/components/schemas/ManagementItem'
        jointOrder:
          type: number
        fileName:
          type: string
        userName:
          type: string
        description:
          type: string
        authorityType:
          type: number
        isStart:
          type: boolean
        createdAt:
          type: string
        updatedAt:
          type: string
    JudgementResult:
      title: JudgementResult
      type: object
      properties:
        pileId:
          type: number
        result:
          type: string
        managementSubItemId:
          type: number
        jointOrder:
          type: number
        createdAt:
          type: string
        updatedAt:
          type: string
    JudgmentResultRequest:
      title: JudgementResultRequest
      type: object
      x-examples:
        example-1:
          value:
            pileId: 7
            data:
              - result: string1
                number: 1
      properties:
        pileId:
          type: number
        data:
          type: array
          items:
            type: object
            properties:
              result:
                type: string
              managementSubItemId:
                type: number
              jointOrder:
                type: number
    MeasurementValue:
      title: MeasurementValue
      type: object
      properties:
        pileId:
          type: number
        resultValue:
          type: string
        managementSubItemId:
          type: number
        itemOrder:
          type: number
        jointOrder:
          type: number
        createdAt:
          type: string
        updatedAt:
          type: string
      description: ''
    MeasurementValueRequest:
      title: MeasurementValueRequest
      type: object
      description: ''
      properties:
        pileId:
          type: number
        data:
          type: array
          items:
            type: object
            properties:
              resultValue:
                type: string
              managementSubItemId:
                type: number
              itemOrder:
                type: number
              jointOrder:
                type: number
    ManagementValueRequest:
      title: ManagementValueRequest
      type: object
      description: ''
      properties:
        pileId:
          type: number
        data:
          type: array
          items:
            type: object
            properties:
              value:
                type: string
              managementSubItemId:
                type: number
              itemOrder:
                type: number
              jointOrder:
                type: number
    CheckStatus:
      title: CheckStatus
      type: object
      properties:
        id:
          type: number
        isAttendanceCheck:
          type: boolean
        jointOrder:
          type: number
        pile:
          $ref: '#/components/schemas/Pile'
        managementItemId:
          type: number
        createdAt:
          type: string
        updatedAt:
          type: string
    CheckStatusPostResponse:
      title: CheckStatusPostResponse
      type: object
      properties:
        id:
          type: number
        isAttendanceCheck:
          type: boolean
        jointOrder:
          type: number
        pile:
          $ref: '#/components/schemas/Pile'
        managementItemId:
          type: number
        createdAt:
          type: string
        updatedAt:
          type: string
      required:
        - id
        - isAttendanceCheck
        - jointOrder
        - pile
        - managementItemId
    CheckStatusRequest:
      title: CheckStatusRequest
      type: object
      properties:
        pileId:
          type: number
        data:
          type: array
          items:
            type: object
            properties:
              managementItemId:
                type: number
              isAttendanceCheck:
                type: boolean
              jointOrder:
                type: number
            required:
              - isAttendanceCheck
              - jointOrder
              - managementItemId
    JudgementMethod:
      title: JudgementMethod
      type: object
      properties:
        id:
          type: number
        name:
          type: string
        number:
          type: number
        isSelected:
          type: boolean
        createdAt:
          type: string
        updatedAt:
          type: string
    JudgementMethodPilePostRequest:
      title: JudgementMethodPilePostRequest
      type: object
      properties:
        pileId:
          type: number
        judgementMethods:
          type: array
          items:
            type: object
            properties:
              id:
                type: number
              isSelected:
                type: boolean
    PileDesign:
      title: PileDesign
      type: object
      properties:
        id:
          type: number
        levelPosition:
          type: number
        fullLength:
          type: number
        settingPileTipDepth:
          type: number
        pileHeadType:
          type: number
        steelBarsForPullOutResistance:
          type: number
        drillingDiameter:
          type: number
        extendedDrillingDiameter:
          type: number
        pileComponentDesign:
          type: array
          items:
            $ref: '#/components/schemas/PileComponentDesign'
        pile:
          $ref: '#/components/schemas/Pile'
        pileTipDiameter:
          type: number
        pictures:
          type: array
          items:
            $ref: '#/components/schemas/Picture'
        result:
          type: string
        pileCode:
          type: string
    PileComponentDesign:
      title: PileComponentDesign
      type: object
      properties:
        id:
          type: number
        pileDesignId:
          type: number
        type:
          type: string
        length:
          type: number
        diameter:
          type: number
        serialNumber:
          type: string
        number:
          type: number
        lowerFittingsType:
          type: string
        lowerFittingsMethodType:
          type: string
        lowerPrimaryTorque:
          type: number
        lowerMainTorque:
          type: number
        createdAt:
          type: string
        updatedAt:
          type: string
        acceptanceInspection:
          $ref: '#/components/schemas/AcceptanceInspections'
        pictures:
          type: array
          items:
            $ref: '#/components/schemas/Picture'
    PileComponentDesignForAcceptanceInspection:
      title: PileComponentDesign
      type: object
      properties:
        pileComponentDesignId:
          type: number
        pileDesignId:
          type: number
        type:
          type: string
        length:
          type: number
        diameter:
          type: number
        serialNumber:
          type: string
        number:
          type: number
        lowerFittingsType:
          type: string
        lowerFittingsMethodType:
          type: string
        lowerPrimaryTorque:
          type: number
        lowerMainTorque:
          type: number
        createdAt:
          type: string
        updatedAt:
          type: string
        acceptanceInspection:
          $ref: '#/components/schemas/AcceptanceInspections'
        pictures:
          type: array
          items:
            $ref: '#/components/schemas/Picture'
    AcceptanceInspections:
      title: AcceptanceInspection
      type: object
      properties:
        id:
          type: number
        acceptanceDate:
          type: string
        isUpperEdge:
          type: boolean
        isLowerEdge:
          type: boolean
        isBoltNumberAndDiameter:
          type: boolean
        appearanceJudgement:
          type: string
        createdAt:
          type: string
        updatedAt:
          type: string
    ManagementValue:
      title: ManagementValue
      type: object
      properties:
        id:
          type: number
        managementSubItemId:
          type: number
        jointOrder:
          type: number
        itemOrder:
          type: number
        value:
          type: string
        createdAt:
          type: string
        updatedAt:
          type: string
    AcceptanceInspectionsPostRequest:
      title: AcceptanceInspectionPostRequest
      type: object
      description: ''
      properties:
        acceptanceDate:
          type: string
        isUpperEdge:
          type: boolean
        isLowerEdge:
          type: boolean
        isBoltNumberAndDiameter:
          type: boolean
        appearanceJudgement:
          type: string
        pileComponentDesignId:
          type: number
      required:
        - acceptanceDate
        - isUpperEdge
        - isLowerEdge
        - isBoltNumberAndDiameter
        - appearanceJudgement
    PileComponentDesignPatchRequest:
      title: PileComponentDesignPatchRequest
      type: object
      properties:
        pileComponentDesigns:
          type: array
          items:
            type: object
            properties:
              id:
                type: number
              serialNumber:
                type: string
        pileHeadType:
          type: number
        result:
          type: string
    Approval:
      title: Approval
      type: object
      properties:
        id:
          type: number
        pile:
          $ref: '#/components/schemas/Pile'
        type:
          type: number
        authorizerUserName:
          type: string
        authorizerName:
          type: string
        createdAt:
          type: string
        updatedAt:
          type: string
    ApprovalRequest:
      title: ApprovalRequest
      type: object
      properties:
        pileId:
          type: number
        type:
          type: number
    User:
      title: User
      type: object
      properties:
        uuid:
          type: string
        userName:
          type: string
        email:
          type: string
        familyName:
          type: string
        givenName:
          type: string
        roleTypeId:
          type: number
        branch:
          $ref: '#/components/schemas/Branch'
        sites:
          type: array
          items:
            $ref: '#/components/schemas/Site'
        createdAt:
          type: string
    Branch:
      title: Branch
      type: object
      properties:
        id:
          type: number
        name:
          type: string
        createdAt:
          type: string
        updatedAt:
          type: string
    BulbsPart:
      title: BulbsPart
      type: object
      properties:
        id:
          type: number
        processTypeId:
          type: number
        upperRotationSpeed:
          type: number
        upperFeedRate:
          type: number
        lowerDischargePressure:
          type: number
        upperDischargePressure:
          type: number
        lowerDepth:
          type: number
        upperDepth:
          type: number
        createdAt:
          type: string
        updatedAt:
          type: string
    PileManagementItem:
      title: PileManagementItem
      type: object
      description: ''
      properties:
        startPictures:
          type: array
          items:
            $ref: '#/components/schemas/Picture'
        managementItems:
          type: array
          items:
            type: object
            properties:
              managementItemId:
                type: number
              jointOrder:
                type: number
              itemName:
                type: string
              originalItemName:
                type: string
              itemOrder:
                type: number
              pictures:
                type: array
                items:
                  $ref: '#/components/schemas/Picture'
              isAttendanceCheck:
                type: boolean
              takesPicture:
                type: boolean
              displaysPicture:
                type: boolean
              managementSubItems:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                    jointType:
                      type: number
                    numOfMeasurementValue:
                      type: number
                    measurementValues:
                      type: array
                      items:
                        type: string
                    managementValues:
                      type: array
                      items:
                        type: string
                    takesPicture:
                      type: boolean
  responses: {}
tags:
  - name: 現場
  - name: 杭
  - name: N値
  - name: 計測データ
  - name: 杭通信装置
  - name: 工法
  - name: 管理項目（大）
  - name: 管理項目（小）
  - name: 写真
  - name: 杭設計値
  - name: 判定結果
  - name: チェックシート
  - name: 受入検査
  - name: 電流帳票
  - name: ユーザ
  - name: 計画書システム連携
